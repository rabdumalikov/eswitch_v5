<!-- HTML header for doxygen 1.8.17-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>eswitch-v5: User Manual</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"><strong>eswitch-v5</strong>
   </div>
   <div id="projectbrief">Advanced counterpart for switch statement in C++</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">User Manual </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#tutorial-overview">Overview</a><ul><li class="level2"><a href="#autotoc_md1">Motivation</a></li>
<li class="level2"><a href="#autotoc_md3">Comparison</a></li>
<li class="level2"><a href="#tutorial-installation">Installation</a></li>
<li class="level2"><a href="#tutorial-license">License</a></li>
<li class="level2"><a href="#tutorial-compilers">Supported Compilers</a></li>
<li class="level2"><a href="#autotoc_md8">Conventions used in this Document</a></li>
</ul>
</li>
<li class="level1"><a href="#tutorial-implementation-details">Implementation Details</a><ul><li class="level2"><a href="#autotoc_md11">Keywords</a></li>
<li class="level2"><a href="#syntax">Syntax</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md14">How to write Custom extensions?</a></li>
<li class="level1"><a href="#autotoc_md16">Rationalities</a></li>
</ul>
</div>
<div class="textblock"><p> 
<!-- Place this tag in your head or just before your close body tag. -->
<script async defer src="https://buttons.github.io/buttons.js"></script>

<a class="github-button" href="https://github.com/rabdumalikov/eswitch_v5" data-color-scheme="no-preference: light; light: light; dark: light;" data-size="large" aria-label="View on github">View on github</a>
</p>
<h1><a class="anchor" id="tutorial-overview"></a>
Overview</h1>
<hr  />
<p> <code><a class="el" href="namespaceeswitch__v5.html">eswitch_v5</a></code> is a library, which is an improved version of <span class="keywordflow"><code>switch</code></span> statement in C++. The main idea behind this library is to be able to overcome <span class="keywordflow"><code>switch</code></span> statement limitations, such as:</p><ul>
<li>one argument per <span class="keywordflow"><code>switch</code></span> statement</li>
<li>the argument restricted to only <em>integral</em> types( <span class="keyword"><code>int</code></span>, <span class="keyword"><code>char</code></span>, <span class="keyword"><code>enum</code></span> ... )</li>
<li>impossibility to compose complex conditions, as opposed to other <em>statements</em> and <em>loops</em> in C++</li>
</ul>
<p><code><a class="el" href="namespaceeswitch__v5.html">eswitch_v5</a></code> supports any number of arguments and almost without restriction on their type as long as the type is comparable( i.e. has <code>operator==</code>, <code>operator!=</code> and so on ). Additionally, my library went beyond overcoming limitations of <span class="keywordflow"><code>switch</code></span> statement e.g. I introduced more expressive way for matching and withdrawing values from <code><a class="elRef" href="http://en.cppreference.com/w/cpp/utility/any.html">std::any</a></code>, <code><a class="elRef" href="http://en.cppreference.com/w/cpp/utility/variant.html">std::variant</a></code>, <code>polymorphic types</code> and <code><a class="elRef" href="http://en.cppreference.com/w/cpp/regex/basic_regex.html">std::regex</a></code>.</p>
<h2><a class="anchor" id="autotoc_md1"></a>
Motivation</h2>
<hr  />
<p> Let's start with a little bit of backstory. As you know in C++, the <span class="keywordflow"><code>switch</code></span> statement is quite limited( compared with other statements ) and there are few reasons for this, which are mainly related to optimization. Compiler can use <b>jump table</b> or <b>binary search</b> to optimize the <span class="keywordflow"><code>switch</code></span> statement, but nothing comes without a price as such optimizations are possible only for compile-time data. In C++98, only values of primitives like <span class="keyword"><code>int</code></span>, <span class="keyword"><code>char</code></span>, <span class="keyword"><code>enum</code></span> and <span class="keyword"><code>bool</code></span> can be known at compile time. That's why the <span class="keywordflow"><code>switch</code></span> statement was restricted to primitive-only. However, in C++11, the new keyword <span class="keyword"><code>constexpr</code></span> was introduced. Which opened the doors for compile-time custom types. So now it has become possible to overcome the primitive-only limitation. There was also the <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3627.html">proposal</a> in this regard. Unfortunately, for whatever reason, the author decided to bail out, even though the feedback from the committee was positive. Nonetheless, even if this proposal was accepted in the C++ standard, the <span class="keywordflow"><code>switch</code></span> statement still wouldn't be as powerful as the <span class="keywordflow"><code>if</code></span> statement.</p>
<p>Let us now carefully examine the <span class="keywordflow"><code>if</code></span> statement. It can be used for various data types that are known at compile time and at runtime. In addition to this, it allows to compose and test complex conditions. Wait wait wait, if the <span class="keywordflow"><code>if</code></span> statement can work with data known at compile-time, then why can't compiler optimize this statement just like the <span class="keywordflow"><code>switch</code></span> statement? In theory, it can. Let me even say that there is a compiler that is capable of doing so and this is clang.</p>
<p><b>For example</b>:  
<button onclick="location.href='https://godbolt.org/z/rq7fzn'" type="button">
         View on <strong>CompilerExplorer</strong></button>
 </p><table class="doxtable">
<tr>
<td><div class="fragment"><div class="line"><span class="keywordtype">int</span> foo(<span class="keywordtype">int</span> num) </div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>     ( num == 10 ) <span class="keywordflow">return</span> 1;</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span>( num == 13 ) <span class="keywordflow">return</span> 2;</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span>( num == 11 ) <span class="keywordflow">return</span> 3;</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span>( num == 19 ) <span class="keywordflow">return</span> 4;</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span>( num == 12 ) <span class="keywordflow">return</span> 5;</div>
<div class="line">    <span class="keywordflow">else</span>                 <span class="keywordflow">return</span> 6;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> bar(<span class="keywordtype">int</span> num) {</div>
<div class="line">    <span class="keywordflow">switch</span>( num )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">case</span> 19: <span class="keywordflow">return</span> 4;</div>
<div class="line">        <span class="keywordflow">case</span> 10: <span class="keywordflow">return</span> 1;</div>
<div class="line">        <span class="keywordflow">case</span> 13: <span class="keywordflow">return</span> 2;</div>
<div class="line">        <span class="keywordflow">case</span> 11: <span class="keywordflow">return</span> 3;</div>
<div class="line">        <span class="keywordflow">case</span> 12: <span class="keywordflow">return</span> 5;</div>
<div class="line">        <span class="keywordflow">default</span>: <span class="keywordflow">return</span> 6;</div>
<div class="line">    };</div>
<div class="line">}                     </div>
</div><!-- fragment --><p class="endtd"></p>
</td><td><div class="fragment"><div class="line">foo(<span class="keywordtype">int</span>):                                # @foo(int)</div>
<div class="line">        add     edi, -10</div>
<div class="line">        cmp     edi, 9</div>
<div class="line">        ja      .LBB0_2</div>
<div class="line">        movsxd  rax, edi</div>
<div class="line">        mov     eax, dword ptr [4*rax + .Lswitch.table.bar(int)]</div>
<div class="line">        ret</div>
<div class="line">.LBB0_2:</div>
<div class="line">        mov     eax, 6</div>
<div class="line">        ret</div>
<div class="line">bar(int):                                # @bar(int)</div>
<div class="line">        add     edi, -10</div>
<div class="line">        cmp     edi, 9</div>
<div class="line">        ja      .LBB1_2</div>
<div class="line">        movsxd  rax, edi</div>
<div class="line">        mov     eax, dword ptr [4*rax + .Lswitch.table.bar(int)]</div>
<div class="line">        ret</div>
<div class="line">.LBB1_2:</div>
<div class="line">        mov     eax, 6</div>
<div class="line">        ret</div>
<div class="line">.Lswitch.table.bar(int):</div>
<div class="line">        .long   1                               # 0x1</div>
<div class="line">        .long   3                               # 0x3</div>
<div class="line">        .long   5                               # 0x5</div>
<div class="line">        .long   2                               # 0x2</div>
<div class="line">        .long   6                               # 0x6</div>
<div class="line">        .long   6                               # 0x6</div>
<div class="line">        .long   6                               # 0x6</div>
<div class="line">        .long   6                               # 0x6</div>
<div class="line">        .long   6                               # 0x6</div>
<div class="line">        .long   4                               # 0x4                        </div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
</table>
<p>If those optimizations are possible, then it means that the limitations of the <span class="keywordflow"><code>switch</code></span> statement make no sense and never had, given that even 10 years old clang-3.0 could do such optimizations. Clang has shown us that similar optimizations can be applied to both of these statements. However, the <span class="keywordflow"><code>if</code></span> statement can also work with runtime data, whereas the <span class="keywordflow"><code>switch</code></span> statement cannot.</p>
<p>And this situation is unfortunate for me and others. The Internet is filled with questions(over million views) from people who are trying to find an insight or a workaround:</p><ul>
<li><a href="https://stackoverflow.com/questions/650162/why-the-switch-statement-cannot-be-applied-on-strings">Why strings cannot be used in switch statement?</a></li>
<li><a href="https://stackoverflow.com/questions/16388510/evaluate-a-string-with-a-switch-in-c">Evaluate a string with a switch in C++</a></li>
<li><a href="https://stackoverflow.com/questions/5452188/switch-case-statement-in-c-with-a-qstring-type">switch/case statement in C++ with a QString type</a></li>
<li><a href="https://stackoverflow.com/questions/68578/multiple-cases-in-switch-statement">How to compose complex condition in switch statement?</a></li>
<li><a href="https://stackoverflow.com/questions/8644096/multiple-conditions-in-switch-case">Multiple conditions in switch case?</a></li>
<li><a href="https://stackoverflow.com/questions/9432226/how-do-i-select-a-range-of-values-in-a-switch-statement/24133078">How do I select a range of values in a switch statement?</a></li>
</ul>
<p>Moreover, I can see all over the place many attempts to overcome those limitations in some way or another:</p>
<ul>
<li>Compilers such as clang and gcc implemented non-standard extension for matching <a href="https://gcc.gnu.org/onlinedocs/gcc/Case-Ranges.html">case ranges</a>: <table cellspacing="0" cellpadding="0">
<tr>
<td><div class="fragment"><div class="line"><span class="keywordflow">switch</span>( num )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">case</span>  1 ... 9:  <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> 10 ... 99: <span class="keywordflow">break</span>;</div>
<div class="line">};                         </div>
</div><!-- fragment --><p class="endtd"></p>
</td><td><div class="fragment"><div class="line"><span class="keywordflow">switch</span>( ch )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;A&#39;</span> ... <span class="charliteral">&#39;Z&#39;</span>: <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;a&#39;</span> ... <span class="charliteral">&#39;z&#39;</span>: <span class="keywordflow">break</span>;</div>
<div class="line">};                         </div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
</table>
</li>
<li>LLVM implemented <a href="https://llvm.org/doxygen/classllvm_1_1StringSwitch.html">StringSwitch</a>: <div class="fragment"><div class="line">Color color = StringSwitch&lt;Color&gt;(argv[i])</div>
<div class="line">    .Case(<span class="stringliteral">&quot;red&quot;</span>, Red)</div>
<div class="line">    .Case(<span class="stringliteral">&quot;orange&quot;</span>, Orange)</div>
<div class="line">    .Case(<span class="stringliteral">&quot;yellow&quot;</span>, Yellow)</div>
<div class="line">    .Case(<span class="stringliteral">&quot;green&quot;</span>, Green)</div>
<div class="line">    .Case(<span class="stringliteral">&quot;blue&quot;</span>, Blue)</div>
<div class="line">    .Case(<span class="stringliteral">&quot;indigo&quot;</span>, Indigo)</div>
<div class="line">    .Cases(<span class="stringliteral">&quot;violet&quot;</span>, <span class="stringliteral">&quot;purple&quot;</span>, Violet)</div>
<div class="line">    .Default(UnknownColor);</div>
</div><!-- fragment --></li>
<li>Apple created the programming language <a href="https://docs.swift.org/swift-book/LanguageGuide/ControlFlow.html#ID548">Swift</a> with advanced the <span class="keywordflow"><code>switch</code></span> statement: <table cellspacing="0" cellpadding="0">
<tr>
<td><div class="fragment"><div class="line"><span class="keywordflow">switch</span> num </div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">case</span> 1..&lt;10:</div>
<div class="line">        print(<span class="stringliteral">&quot;range [1,10)&quot;</span>)</div>
<div class="line">    case 10..&lt;100:</div>
<div class="line">        print(&quot;<a class="code" href="group__underlying-details.html#ga7a5215c0c1466c28d549a94cddab1b7a">range</a> [10,100)&quot;)</div>
<div class="line">    case 100..&lt;1000:</div>
<div class="line">        print(&quot;<a class="code" href="group__underlying-details.html#ga7a5215c0c1466c28d549a94cddab1b7a">range</a> [100,1000)&quot;)</div>
<div class="line">    default:</div>
<div class="line">        print(&quot;unknown <a class="code" href="group__underlying-details.html#ga7a5215c0c1466c28d549a94cddab1b7a">range</a>&quot;)</div>
<div class="line">}</div>
</div><!-- fragment --><p class="endtd"></p>
</td><td><div class="fragment"><div class="line"><span class="keywordflow">switch</span> someCharacter </div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">case</span> <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;e&quot;</span>, <span class="stringliteral">&quot;i&quot;</span>, <span class="stringliteral">&quot;o&quot;</span>, <span class="stringliteral">&quot;u&quot;</span>:</div>
<div class="line">        print(<span class="stringliteral">&quot;a vowel&quot;</span>)</div>
<div class="line">    case &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;f&quot;, &quot;g&quot;, &quot;h&quot;, &quot;j&quot;,</div>
<div class="line">         &quot;k&quot;, &quot;l&quot;, &quot;m&quot;, &quot;n&quot;, &quot;p&quot;, &quot;q&quot;, &quot;r&quot;, </div>
<div class="line">         &quot;s&quot;, &quot;t&quot;, &quot;v&quot;, &quot;w&quot;, &quot;x&quot;, &quot;y&quot;, &quot;z&quot;:</div>
<div class="line">        print(&quot;a consonant&quot;)</div>
<div class="line">    default:</div>
<div class="line">        print(&quot;neither a vowel nor a consonant&quot;)</div>
<div class="line">}</div>
</div><!-- fragment --><p class="endtd"></p>
</td><td><div class="fragment"><div class="line"><span class="keywordflow">switch</span> somePoint </div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">case</span> (0, 0): print(<span class="stringliteral">&quot;at the origin&quot;</span>)</div>
<div class="line">    case (<a class="code" href="group__other-variables.html#ga4330972eb8a11e6d7848c7bae4582e69">_</a>, 0): print(&quot;on the x-axis&quot;)</div>
<div class="line">    case (0, <a class="code" href="group__other-variables.html#ga4330972eb8a11e6d7848c7bae4582e69">_</a>): </div>
<div class="line">        print(&quot;on the y-axis&quot;)</div>
<div class="line">    case (-2...2, -2...2):</div>
<div class="line">        print(&quot;inside the box&quot;)</div>
<div class="line">    default:</div>
<div class="line">        print(&quot;outside of the box&quot;)</div>
<div class="line">}</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
</table>
</li>
</ul>
<p>Apparently, the <span class="keywordflow"><code>switch</code></span> statement also can be as powerful as the <span class="keywordflow"><code>if</code></span> statement. This insight became my motivation to start this project. Where I tried:</p><ol type="1">
<li>Address all the limitations</li>
<li>Leave the syntax of <code>eswitch</code> as close as possible to the <span class="keywordflow"><code>switch</code></span> statement. Compare: <table cellspacing="0" cellpadding="0">
<tr>
<td><div class="fragment"><div class="line"><span class="keywordflow">switch</span>( num )</div>
<div class="line">{ </div>
<div class="line">    <span class="keywordflow">case</span> 1:  {...} <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> 2:  {...} <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>: {...} <span class="keywordflow">break</span>;</div>
<div class="line">};          </div>
</div><!-- fragment --><p class="endtd"></p>
</td><td><div class="fragment"><div class="line"><a class="code" href="group__main-components.html#ga82f93fb22725d76bb016b488742331d1">eswitch</a>( num )</div>
<div class="line">(              </div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( 1 ) {...},</div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( 2 ) {...},</div>
<div class="line">    <a class="code" href="group__macroses.html#gaff2b0c246e6111e260e650b0ff4a8eb5">Default</a>   {...}</div>
<div class="line">);  </div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
</table>
Pretty close, isn't it? Except the places where I've been either limited by the language or intentionally tried to avoid one particular behavior of the <span class="keywordflow"><code>switch</code></span> statement such as default fallthrough.<br  />
<br  />
<dl class="section note"><dt>Note</dt><dd>In C++ <span class="keywordflow"><code>switch</code></span> statement has explicit <span class="keywordflow"><code>break</code></span> and implicit fallthrough.</dd></dl>
<br  />
This behavior is considered error-prone. Since developers occasionally forget to use <span class="keywordflow"><code>break</code></span>. Thus, in my implementation, I reversed this concept i.e. <code>eswitch</code> has an implicit <span class="keywordflow"><code>break</code></span> and an explicit fallthrough. Compare: <table cellspacing="0" cellpadding="0">
<tr>
<td><div class="fragment"><div class="line"><span class="keywordflow">switch</span>( num )            </div>
<div class="line">{                        </div>
<div class="line">    <span class="keywordflow">case</span> 1:  {...}       </div>
<div class="line">    <span class="keywordflow">case</span> 2:  {...} <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>: {...} <span class="keywordflow">break</span>;</div>
<div class="line">};                               </div>
</div><!-- fragment --><p class="endtd"></p>
</td><td><div class="fragment"><div class="line"><a class="code" href="group__main-components.html#ga82f93fb22725d76bb016b488742331d1">eswitch</a>( num )     </div>
<div class="line">(     </div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( 1 ){...} ^ <a class="code" href="group__other-variables.html#ga23e83b648756cadca9232aaf9d7d3d03">fallthrough_</a>,</div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( 2 ){...},     </div>
<div class="line">    <a class="code" href="group__macroses.html#gaff2b0c246e6111e260e650b0ff4a8eb5">Default</a>  {...}     </div>
<div class="line">);      </div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
</table>
</li>
<li>And last but not least, another my priority was the performance of <code>eswitch</code>. I worked so hard in order to be as close as possible to the performance of the <span class="keywordflow"><code>switch</code></span> statement.</li>
</ol>
<h2><a class="anchor" id="autotoc_md3"></a>
Comparison</h2>
<hr  />
<p> Unfortunately, the full comparison of <code>eswitch</code> vs the <span class="keywordflow"><code>switch</code></span> statement isn't possible due to the limitations of the latter. Thus I'm going to make a comparison with the <span class="keywordflow"><code>if</code></span> statement instead.</p>
<table class="doxtable">
<tr>
<th>eswitch</th><th>if statement </th></tr>
<tr>
<td colspan="2"><div align="left"> <b>any_from helper function</b> </div> </td></tr>
<tr>
<td><div class="fragment"><div class="line"><a class="code" href="group__main-components.html#ga82f93fb22725d76bb016b488742331d1">eswitch</a>( file_extension )</div>
<div class="line">( </div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( <a class="code" href="group__main-components.html#ga11dfab51a8955d42153603db05629b59">any_from</a>( <span class="stringliteral">&quot;cpp&quot;</span>, <span class="stringliteral">&quot;c++&quot;</span>, <span class="stringliteral">&quot;cxx&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>, <span class="stringliteral">&quot;C&quot;</span> ) )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> <span class="stringliteral">&quot;source&quot;</span>;</div>
<div class="line">    },</div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( <a class="code" href="group__main-components.html#ga11dfab51a8955d42153603db05629b59">any_from</a>( <span class="stringliteral">&quot;hpp&quot;</span>, <span class="stringliteral">&quot;h++&quot;</span>, <span class="stringliteral">&quot;hxx&quot;</span>, <span class="stringliteral">&quot;hh&quot;</span>, <span class="stringliteral">&quot;h&quot;</span>, <span class="stringliteral">&quot;H&quot;</span> ) )</div>
<div class="line">    {  </div>
<div class="line">        <span class="keywordflow">return</span> <span class="stringliteral">&quot;header&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">);</div>
</div><!-- fragment --><p class="endtd"></p>
</td><td><div class="fragment"><div class="line"><span class="keywordflow">if</span>( file_extension == <span class="stringliteral">&quot;cpp&quot;</span> ||</div>
<div class="line">    file_extension == <span class="stringliteral">&quot;c++&quot;</span> ||</div>
<div class="line">    file_extension == <span class="stringliteral">&quot;cxx&quot;</span> ||</div>
<div class="line">    file_extension == <span class="stringliteral">&quot;cc&quot;</span>  ||</div>
<div class="line">    file_extension == <span class="stringliteral">&quot;C&quot;</span> )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> <span class="stringliteral">&quot;source&quot;</span>;</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span> <span class="keywordflow">if</span>(</div>
<div class="line">    file_extension == <span class="stringliteral">&quot;hpp&quot;</span> ||</div>
<div class="line">    file_extension == <span class="stringliteral">&quot;h++&quot;</span> ||</div>
<div class="line">    file_extension == <span class="stringliteral">&quot;hxx&quot;</span> ||</div>
<div class="line">    file_extension == <span class="stringliteral">&quot;hh&quot;</span>  ||</div>
<div class="line">    file_extension == <span class="stringliteral">&quot;h&quot;</span>   ||</div>
<div class="line">    file_extension == <span class="stringliteral">&quot;H&quot;</span> )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> <span class="stringliteral">&quot;header&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
<tr>
<td colspan="2"><div align="left"> <b>Match and withdraw value from <code><a class="elRef" href="http://en.cppreference.com/w/cpp/utility/any.html">std::any</a></code> and <code><a class="elRef" href="http://en.cppreference.com/w/cpp/utility/variant.html">std::variant</a></code></b> - in terms of this library the usage for matching type in either of<br  />
 those objects is unified, whereas in raw C++ usage is different. </div> </td></tr>
<tr>
<td rowspan="2"><div class="fragment"><div class="line"><a class="code" href="group__main-components.html#ga82f93fb22725d76bb016b488742331d1">eswitch</a>( any_or_variant_obj )</div>
<div class="line">(</div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( is&lt; int &gt;{} )( <span class="keyword">const</span> <span class="keywordtype">int</span> value )</div>
<div class="line">    {</div>
<div class="line">        ...</div>
<div class="line">    },</div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( is&lt; string &gt;{} )( <span class="keyword">const</span> <span class="keywordtype">string</span> &amp; value )</div>
<div class="line">    {</div>
<div class="line">        ...</div>
<div class="line">    }</div>
<div class="line">);</div>
</div><!-- fragment --><p class="endtd"></p>
</td><td><div class="fragment"><div class="line"><a class="codeRef" href="http://en.cppreference.com/w/cpp/utility/any.html">std::any</a> any_obj = ...;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>( <span class="keyword">auto</span> * value = any_cast&lt; int &gt;( &amp;any_obj ) )</div>
<div class="line">{</div>
<div class="line">    ...</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span> <span class="keywordflow">if</span>( <span class="keyword">auto</span> * value = any_cast&lt; string &gt;( &amp;any_obj ) )</div>
<div class="line">{</div>
<div class="line">    ...</div>
<div class="line">}</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
<tr>
<td><div class="fragment"><div class="line"><a class="codeRef" href="http://en.cppreference.com/w/cpp/utility/variant.html">std::variant&lt; int, string &gt;</a> variant_obj = ...;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>( <span class="keyword">auto</span> * value = get_if&lt; int &gt;( &amp;variant_obj ) )</div>
<div class="line">{</div>
<div class="line">    ...</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span> <span class="keywordflow">if</span>( <span class="keyword">auto</span> * value = get_if&lt; string &gt;( &amp;variant_obj ) )</div>
<div class="line">{</div>
<div class="line">    ...</div>
<div class="line">}</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
<tr>
<td colspan="2"><div align="left"> <b>Match for polymorphic types</b> </div> </td></tr>
<tr>
<td><div class="fragment"><div class="line"><a class="code" href="group__main-components.html#ga82f93fb22725d76bb016b488742331d1">eswitch</a>( base_ptr )</div>
<div class="line">(</div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( is&lt; circle &gt;{} )( circle * c )</div>
<div class="line">    {</div>
<div class="line">        c-&gt;draw();</div>
<div class="line">    },</div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( is&lt; square &gt;{} )( square * s )</div>
<div class="line">    {</div>
<div class="line">        s-&gt;draw();</div>
<div class="line">    }</div>
<div class="line">);</div>
</div><!-- fragment --><p class="endtd"></p>
</td><td><div class="fragment"><div class="line"><span class="keywordflow">if</span>( <span class="keyword">auto</span> * c = <span class="keyword">dynamic_cast&lt;</span> circle* <span class="keyword">&gt;</span>( base_ptr ) )</div>
<div class="line">{</div>
<div class="line">    c-&gt;draw();</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span> <span class="keywordflow">if</span>( <span class="keyword">auto</span> * s = <span class="keyword">dynamic_cast&lt;</span> square* <span class="keyword">&gt;</span>( base_ptr ) )</div>
<div class="line">{</div>
<div class="line">    s-&gt;draw();</div>
<div class="line">}</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
<tr>
<td><div class="fragment"><div class="line"><a class="code" href="group__main-components.html#ga82f93fb22725d76bb016b488742331d1">eswitch</a>( base_ref )</div>
<div class="line">(</div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( is&lt; circle &gt;{} )( circle &amp; c )</div>
<div class="line">    {</div>
<div class="line">        c.draw();</div>
<div class="line">    },</div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( is&lt; square &gt;{} )( square &amp; s )</div>
<div class="line">    {</div>
<div class="line">        s.draw();</div>
<div class="line">    }</div>
<div class="line">);</div>
</div><!-- fragment --><p class="endtd"></p>
</td><td><div class="fragment"><div class="line"><span class="keywordflow">try</span></div>
<div class="line">{</div>
<div class="line">    <span class="keyword">auto</span> &amp; c = <span class="keyword">dynamic_cast&lt;</span> circle&amp; <span class="keyword">&gt;</span>( base_ptr );</div>
<div class="line">    c.draw();</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">catch</span>( <span class="keyword">const</span> bad_cast &amp; ) { ... }</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">try</span></div>
<div class="line">{</div>
<div class="line">    <span class="keyword">auto</span> &amp; s = <span class="keyword">dynamic_cast&lt;</span> square&amp; <span class="keyword">&gt;</span>( base_ptr );</div>
<div class="line">    s.draw();</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">catch</span>( <span class="keyword">const</span> bad_cast &amp; ) { ... }</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
<tr>
<td colspan="2"><div align="left"> <b>Match for <a class="elRef" href="http://en.cppreference.com/w/cpp/regex/basic_regex.html">std::regex</a></b> </div> </td></tr>
<tr>
<td><div class="fragment"><div class="line"><a class="code" href="group__main-components.html#ga82f93fb22725d76bb016b488742331d1">eswitch</a>( text )</div>
<div class="line">(</div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( R<span class="stringliteral">&quot;(\w*)&quot;_r ) { </span><span class="keywordflow">return</span> <span class="stringliteral">&quot;word&quot;</span>; },</div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( R<span class="stringliteral">&quot;(\d*)&quot;_r ) { </span><span class="keywordflow">return</span> <span class="stringliteral">&quot;number&quot;</span>; }</div>
<div class="line">);</div>
</div><!-- fragment --><p class="endtd"></p>
</td><td><div class="fragment"><div class="line">smatch match;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>( <a class="codeRef" href="http://en.cppreference.com/w/cpp/regex/regex_match.html">regex_match</a>( text, match, regex( R<span class="stringliteral">&quot;(\w*)&quot; ) ) )</span></div>
<div class="line"><span class="stringliteral">{  </span></div>
<div class="line"><span class="stringliteral">    </span><span class="keywordflow">return</span> <span class="stringliteral">&quot;word&quot;</span>;</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="codeRef" href="http://en.cppreference.com/w/cpp/regex/regex_match.html">regex_match</a>( text, match, regex( R<span class="stringliteral">&quot;(\d*)&quot; ) ) )</span></div>
<div class="line"><span class="stringliteral">{</span></div>
<div class="line"><span class="stringliteral">    </span><span class="keywordflow">return</span> <span class="stringliteral">&quot;number&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
<tr>
<td colspan="2"><div align="left"> <b>Match and withdraw values from <a class="elRef" href="http://en.cppreference.com/w/cpp/regex/basic_regex.html">std::regex</a></b> </div> </td></tr>
<tr>
<td><div class="fragment"><div class="line"><a class="code" href="group__main-components.html#ga82f93fb22725d76bb016b488742331d1">eswitch</a>( text )</div>
<div class="line">(</div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( R<span class="stringliteral">&quot;((\w*))&quot;_r )( vector&lt; string &gt; &amp;&amp; match )</span></div>
<div class="line"><span class="stringliteral">    {</span></div>
<div class="line"><span class="stringliteral">        </span><span class="keywordflow">return</span> match[1];</div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( R<span class="stringliteral">&quot;((\d*))&quot;_r )( vector&lt; string &gt; &amp;&amp; match )</span></div>
<div class="line"><span class="stringliteral">    { </span></div>
<div class="line"><span class="stringliteral">        </span><span class="keywordflow">return</span> match[1];</div>
<div class="line">    }</div>
<div class="line">);</div>
</div><!-- fragment --><p class="endtd"></p>
</td><td><div class="fragment"><div class="line">smatch match;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>( <a class="codeRef" href="http://en.cppreference.com/w/cpp/regex/regex_match.html">regex_match</a>( text, match, regex( R<span class="stringliteral">&quot;((\w*))&quot; ) ) )</span></div>
<div class="line"><span class="stringliteral">{</span></div>
<div class="line"><span class="stringliteral">    </span><span class="keywordflow">return</span> match[1];</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="codeRef" href="http://en.cppreference.com/w/cpp/regex/regex_match.html">regex_match</a>( text, match, regex( R<span class="stringliteral">&quot;((\d*))&quot; ) ) )</span></div>
<div class="line"><span class="stringliteral">{</span></div>
<div class="line"><span class="stringliteral">    </span><span class="keywordflow">return</span> match[1];</div>
<div class="line">}</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
<tr>
<td colspan="2"><div align="left"> <b>Match for individual entries in <a class="elRef" href="http://en.cppreference.com/w/cpp/utility/pair.html">std::pair</a></b> </div> </td></tr>
<tr>
<td><div class="fragment"><div class="line"><a class="code" href="group__main-components.html#ga82f93fb22725d76bb016b488742331d1">eswitch</a>( <a class="codeRef" href="http://en.cppreference.com/w/cpp/utility/pair/make_pair.html">make_pair</a>( 10, <span class="keywordtype">string</span>{<span class="stringliteral">&quot;Text&quot;</span>} ) )</div>
<div class="line">(</div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( 10, <span class="stringliteral">&quot;Text&quot;</span> ){ ... }</div>
<div class="line">);</div>
</div><!-- fragment --><p class="endtd"></p>
</td><td><div class="fragment"><div class="line"><span class="keyword">auto</span> pr = <a class="codeRef" href="http://en.cppreference.com/w/cpp/utility/pair/make_pair.html">make_pair</a>( 10, <span class="keywordtype">string</span>{<span class="stringliteral">&quot;Text&quot;</span>} );</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>( pr.first == 10 &amp;&amp; pr.second == <span class="stringliteral">&quot;Text&quot;</span> ) { ... }</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
<tr>
<td colspan="2"><div align="left"> <b>Match for individual entries in <a class="elRef" href="http://en.cppreference.com/w/cpp/utility/tuple.html">std::tuple</a></b> </div> </td></tr>
<tr>
<td><div class="fragment"><div class="line"><a class="code" href="group__main-components.html#ga82f93fb22725d76bb016b488742331d1">eswitch</a>( <a class="codeRef" href="http://en.cppreference.com/w/cpp/utility/tuple/make_tuple.html">make_tuple</a>( 1, 0, 0, 1 ) )</div>
<div class="line">(</div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( 1, 0, 0, 1 ) { <span class="keywordflow">return</span> 9; },</div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( 1, 1, 1, 1 ) { <span class="keywordflow">return</span> 15; }</div>
<div class="line">);</div>
</div><!-- fragment --><p class="endtd"></p>
</td><td><div class="fragment"><div class="line"><span class="keyword">auto</span> tup = <a class="codeRef" href="http://en.cppreference.com/w/cpp/utility/tuple/make_tuple.html">make_tuple</a>( 1, 0, 0, 1 );</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> [ x, y, z, k ] = tup;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>( x == 1 &amp;&amp; y == 0 &amp;&amp; z == 0 &amp;&amp; k == 1 )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> 9;</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span> <span class="keywordflow">if</span>( x == 1 &amp;&amp; y == 1 &amp;&amp; z == 1 &amp;&amp; k == 1 )</div>
<div class="line">{</div>
<div class="line">   <span class="keywordflow">return</span> 15;</div>
<div class="line">}</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
<tr>
<td colspan="2"><div align="left"> <b>Check in range</b> </div> </td></tr>
<tr>
<td><div class="fragment"><div class="line"><a class="code" href="group__main-components.html#ga82f93fb22725d76bb016b488742331d1">eswitch</a>( p1 )</div>
<div class="line">(</div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( <a class="code" href="group__index-variables.html#ga0467e341724f219d72f18c1c0885442a">_1</a>.between( 1, 10 ) ) {...},</div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( <a class="code" href="group__index-variables.html#ga0467e341724f219d72f18c1c0885442a">_1</a>.within( 11, 20 ) ) {...}</div>
<div class="line">);</div>
</div><!-- fragment --><p class="endtd"></p>
</td><td><div class="fragment"><div class="line"><span class="keywordflow">if</span>     ( num &gt;   1 &amp;&amp; num &lt;  10 ) { ... }</div>
<div class="line"><span class="keywordflow">else</span> <span class="keywordflow">if</span>( num &gt;= 11 &amp;&amp; num &lt;= 20 ) { ... }</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
</table>
<h2><a class="anchor" id="tutorial-installation"></a>
Installation</h2>
<hr  />
<p> It is a header-only library. On top of that entire library was implemented within a single file, thus you can get that <a href="https://github.com/rabdumalikov/eswitch_v5/blob/main/include/eswitch/eswitch_v5.hpp">file</a> from the <a href="https://github.com/rabdumalikov/eswitch_v5">repository</a> and just include it.</p>
<h2><a class="anchor" id="tutorial-license"></a>
License</h2>
<hr  />
<p> This code is distributed under the Boost Software License, Version 1.0. (See accompanying file <a href="https://github.com/rabdumalikov/eswitch_v5/blob/main/LICENSE.txt">LICENSE.txt</a> or copy at <a href="http://www.boost.org/LICENSE_1_0.txt">http://www.boost.org/LICENSE_1_0.txt</a>)</p>
<h2><a class="anchor" id="tutorial-compilers"></a>
Supported Compilers</h2>
<hr  />
<p> Should work on all major compilers which support C++20. I personally tested on the following:</p>
<ul>
<li><b>clang++-11</b> (or later)</li>
<li><b>g++-10.2</b> (or later)</li>
<li><b>Visual Studio 2019</b> - isn't supported for now, just because <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/p0428r2.pdf">familiar template syntax for generic lambdas</a> from C++20 wasn't implemented by <em>Microsoft</em> compiler. I reported about this <a href="https://developercommunity.visualstudio.com/t/keyword-requires-within-if-statement-doesnt-work/1287202">issue</a>, right now it is under investigation.</li>
</ul>
<h2><a class="anchor" id="autotoc_md8"></a>
Conventions used in this Document</h2>
<hr  />
<p> In all code examples, I omit the namespace prefixes for names in the <code><a class="el" href="namespaceeswitch__v5.html">eswitch_v5</a></code> and <code>std</code> namespaces.</p>
<h1><a class="anchor" id="tutorial-implementation-details"></a>
Implementation Details</h1>
<hr  />
<p> This section contains all the details, which user need to know in order to use this library successfully.</p>
<h2><a class="anchor" id="autotoc_md11"></a>
Keywords</h2>
<hr  />
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Name </th><th class="markdownTableHeadCenter">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><code>eswitch</code> </td><td class="markdownTableBodyCenter">accepts list of arguments  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><code>Case</code> </td><td class="markdownTableBodyCenter">accepts condition to check and body next to it will be executed if condition matched  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><code>Default</code> </td><td class="markdownTableBodyCenter">body next to it will be executed if nothing else matched  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><code>fallthrough_</code> </td><td class="markdownTableBodyCenter">next body will be executed without checking its condition  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><code>any_from</code> </td><td class="markdownTableBodyCenter">accepts values to choose from  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><code>is&lt;sometype&gt;</code> </td><td class="markdownTableBodyCenter">used within <code>Case</code> for matching types like <code><a class="elRef" href="http://en.cppreference.com/w/cpp/utility/any.html">std::any</a></code>, <code><a class="elRef" href="http://en.cppreference.com/w/cpp/utility/variant.html">std::variant</a></code> and <code>polymorphic types match</code>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><code>_r</code> </td><td class="markdownTableBodyCenter">user defined literal for <code><a class="elRef" href="http://en.cppreference.com/w/cpp/regex/basic_regex.html">std::regex</a></code>  </td></tr>
</table>
<h2><a class="anchor" id="syntax"></a>
Syntax</h2>
<hr  />
<p><b>1. Full declaration</b> </p><div class="fragment"><div class="line"><a class="code" href="group__main-components.html#ga82f93fb22725d76bb016b488742331d1">eswitch</a>( __arguments__ )</div>
<div class="line">( </div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( __conditions__ )( __param__ ) { __body__ } ^ __options__,</div>
<div class="line">    <a class="code" href="group__macroses.html#gaff2b0c246e6111e260e650b0ff4a8eb5">Default</a> { __body__ }</div>
<div class="line">);</div>
</div><!-- fragment --><p><b>2. Omitted parameter</b>: same as lambda without parameter </p><div class="fragment"><div class="line"><a class="code" href="group__main-components.html#ga82f93fb22725d76bb016b488742331d1">eswitch</a>( __arguments__ )</div>
<div class="line">( </div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( __conditions__ ) { __body__ } ^ __options__,</div>
<div class="line">    <a class="code" href="group__macroses.html#gaff2b0c246e6111e260e650b0ff4a8eb5">Default</a> { __body__ }</div>
<div class="line">);</div>
</div><!-- fragment --><p><b>3. Omitted setting options</b>: default option( <span class="keywordflow"><code>break</code></span> ) will be used </p><div class="fragment"><div class="line"><a class="code" href="group__main-components.html#ga82f93fb22725d76bb016b488742331d1">eswitch</a>( __arguments__ )</div>
<div class="line">( </div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( __conditions__ ) { __body__ },</div>
<div class="line">    <a class="code" href="group__macroses.html#gaff2b0c246e6111e260e650b0ff4a8eb5">Default</a> { __body__ }</div>
<div class="line">);</div>
</div><!-- fragment --><p><b>4. Omitted 'Default'</b>: no fallback </p><div class="fragment"><div class="line"><a class="code" href="group__main-components.html#ga82f93fb22725d76bb016b488742331d1">eswitch</a>( __arguments__ )</div>
<div class="line">( </div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( __conditions__ ) { __body__ }</div>
<div class="line">);</div>
</div><!-- fragment --><p><b>Explanation</b></p>
<table class="doxtable">
<tr>
<th>Name</th><th>Details </th></tr>
<tr>
<td><span style="color:blue">__arguments__</span> </td><td><div align="left"> The list of arguments( i.e. <code>arg_1, arg_2, ..., arg_n</code> ) </div> </td></tr>
<tr>
<td rowspan="2"><span style="color:blue">__conditions__</span> </td><td><div align="left"> It is a <em>lazy expression</em>, where indexes <code>_1, _2, ...</code> represent one-to-one<br  />
 correspondance with arguments in <code>eswitch</code>. Consider following code: </div> <div class="fragment"><div class="line"><a class="code" href="group__main-components.html#ga82f93fb22725d76bb016b488742331d1">eswitch</a>(arg_1, arg_2, ..., arg_n)</div>
<div class="line">(</div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( <a class="code" href="group__index-variables.html#ga0467e341724f219d72f18c1c0885442a">_1</a> == smth_1 || <a class="code" href="group__index-variables.html#gacc83659898439dd14b78fc60be68ce28">_2</a> == smth_2 || ... ) {...}</div>
<div class="line">);</div>
<div class="line"><span class="comment">// _1 refer to arg_1</span></div>
<div class="line"><span class="comment">// _2 refer to arg_2</span></div>
<div class="line"><span class="comment">// ...</span></div>
</div><!-- fragment --><p class="intertd"><b>Possible usages:</b> </p><div class="fragment"><div class="line"><a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( <a class="code" href="group__index-variables.html#ga0467e341724f219d72f18c1c0885442a">_1</a> == smth1 &amp;&amp; <a class="code" href="group__index-variables.html#gacc83659898439dd14b78fc60be68ce28">_2</a> == smth2 &amp;&amp; ... )                    (1)</div>
<div class="line">________________________________________________________________</div>
<div class="line"> </div>
<div class="line"><a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( smth1, smth2, ... )                                    (2)</div>
<div class="line">________________________________________________________________</div>
<div class="line"> </div>
<div class="line"><a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( <a class="code" href="group__index-variables.html#ga0467e341724f219d72f18c1c0885442a">_1</a> == <a class="code" href="group__main-components.html#ga11dfab51a8955d42153603db05629b59">any_from</a>( smth1, smth2, ... ) )                  (3)</div>
<div class="line">________________________________________________________________</div>
<div class="line"> </div>
<div class="line"><a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( <a class="code" href="group__main-components.html#ga11dfab51a8955d42153603db05629b59">any_from</a>( smth1, smth2, ... ) )                        (4)</div>
<div class="line">________________________________________________________________</div>
<div class="line"> </div>
<div class="line"><a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( ( pred1, <a class="code" href="group__index-variables.html#ga0467e341724f219d72f18c1c0885442a">_1</a> ) &amp;&amp; ( pred2, <a class="code" href="group__index-variables.html#gacc83659898439dd14b78fc60be68ce28">_2</a> ) &amp;&amp; ... )                (5)</div>
<div class="line">________________________________________________________________</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
<tr>
<td><div align="left"> <ol>
<li>
Match in order<br  />
 </li>
<li>
Same as the 1st one, but less verbose<br  />
 </li>
<li>
Match via <code>any_from</code><br  />
 </li>
<li>
Same as the 3rd one, but less verbose<br  />
 </li>
<li>
Match via predicate </li>
</ol>
</div> </td></tr>
<tr>
<td><div align="center"> <span style="color:blue">__body__</span> </div> </td><td><div align="left"> Function body </div> </td></tr>
<tr>
<td><div align="center"> Optional:<br  />
 <span style="color:blue">__param__</span> </div> </td><td><div align="left">Correspond to withdrawn value from: <code><a class="elRef" href="http://en.cppreference.com/w/cpp/utility/any.html">std::any</a></code>, <code><a class="elRef" href="http://en.cppreference.com/w/cpp/utility/variant.html">std::variant</a></code>,<br  />
 <code>polymorphic match</code> or <code><a class="elRef" href="http://en.cppreference.com/w/cpp/regex/basic_regex.html">std::regex</a></code> match. But also it corresponds to the<br  />
 returned value wrapped into <code><a class="elRef" href="http://en.cppreference.com/w/cpp/utility/optional.html">std::optional</a></code> from custom extensions.<br  />
 <dl class="section note"><dt>Note</dt><dd>Keyword <span class="keyword"><code>auto</code></span> here is forbidden,<br  />
 i.e. type of <span style="color:blue">__param__</span> should be specified explicitly.  </dd></dl>
</div></td></tr>
<tr>
<td><div align="left"> <div align="center"> Optional:<br  />
 <span style="color:blue">__options__</span> </div> </div></td><td><div align="left"> <table class="doxtable">
<tr>
<td>-</td><td>following <code>Case</code>'s won't be executed </td></tr>
<tr>
<td>fallthrough_</td><td>execute body of the following <code>Case</code> </td></tr>
<tr>
<td>likely_</td><td>messing with branch predictions<br  />
 ( will be introduced in future ) </td></tr>
</table>
</div></td></tr>
</table>
<div align="left"></div><h1><a class="anchor" id="autotoc_md14"></a>
How to write Custom extensions?</h1>
<div align="left"> <hr  />
</div><div align="left">This guide deals with how to define the custom <code>Case</code> behavior for any types. We will implement a custom extension and I walk you through all steps and details.</div><div align="left"><dl class="section note"><dt>Note</dt><dd>The only things which we can be customized are all the comparison <code>operators</code> such as <code>==</code>, <code>!=</code>, <code>&gt;</code>, <code>&lt;</code> and so on.</dd></dl>
<b>Let's begin:</b></div><div align="left">As you know, comparing floating points is a tricky, for example, the following code fails due to inaccurate precision: <div class="fragment"><div class="line"><a class="code" href="group__main-components.html#ga82f93fb22725d76bb016b488742331d1">eswitch</a>( 2 - 0.7000000001 )</div>
<div class="line">(</div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( 1.3 )</div>
<div class="line">    {</div>
<div class="line">        ...</div>
<div class="line">    },</div>
<div class="line">    <a class="code" href="group__macroses.html#gaff2b0c246e6111e260e650b0ff4a8eb5">Default</a> </div>
<div class="line">    { </div>
<div class="line">        assert( <span class="keyword">false</span> );</div>
<div class="line">    }</div>
<div class="line">);</div>
</div><!-- fragment --></div><div align="left">So the standard way of comparing floating points doesn't work properly. On top of that, simple overloading of <code>operator==</code> for primitives is <a href="https://eel.is/c++draft/over.oper#general-7">forbidden</a>.</div><div align="left"><div class="fragment"><div class="line"><span class="keywordtype">bool</span> <a class="code" href="group__modules.html#ga620be0eec7b29eb300458a049bde6abe">operator==</a>( <span class="keyword">const</span> <span class="keywordtype">double</span> d1, <span class="keyword">const</span> <span class="keywordtype">double</span> d1 )</div>
<div class="line">{</div>
<div class="line">    ...</div>
<div class="line">}</div>
<div class="line"><span class="comment">/// Compilation ERROR: overloaded &#39;operator==&#39; must have at least one parameter of class or enumeration type</span></div>
</div><!-- fragment --></div><div align="left">To overcome this, we must use an intermediate class that will hold our value. Like this:&#160; <div class="fragment"><div class="line"><span class="keyword">struct </span>double_value</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">double</span> value;</div>
<div class="line">};</div>
</div><!-- fragment --></div><div align="left">Then we can use <code>double_value</code> in our overloaded <code>operator==</code> : <div class="fragment"><div class="line"><span class="keywordtype">bool</span> <a class="code" href="group__modules.html#ga620be0eec7b29eb300458a049bde6abe">operator==</a>( <span class="keyword">const</span> <span class="keywordtype">double</span> d1, <span class="keyword">const</span> double_value d2 )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> <a class="codeRef" href="http://en.cppreference.com/w/cpp/numeric/math/fabs.html">fabs</a>( d1 - d2.value ) &lt; __FLT_EPSILON__;</div>
<div class="line">}</div>
</div><!-- fragment --></div><div align="left">Now code below will work as we desired since using <code>double_value</code> allows for compiler through <a href="https://en.cppreference.com/w/cpp/language/lookup">name lookup</a> to find our custom <code>operator==</code>. <div class="fragment"><div class="line"><a class="code" href="group__main-components.html#ga82f93fb22725d76bb016b488742331d1">eswitch</a>( 2 - 0.7000000001 )</div>
<div class="line">(</div>
<div class="line">    <a class="code" href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a>( double_value{ 1.3 } ) </div>
<div class="line">    {</div>
<div class="line">        ...</div>
<div class="line">    },</div>
<div class="line">    <a class="code" href="group__macroses.html#gaff2b0c246e6111e260e650b0ff4a8eb5">Default</a> </div>
<div class="line">    { </div>
<div class="line">        assert( <span class="keyword">false</span> ); </div>
<div class="line">    }</div>
<div class="line">);</div>
</div><!-- fragment --></div><div align="left"><b>Full example</b>: <a class="el" href="md_examples.html#example-floating-point-comparison">Floating point comparison</a></div><div align="left"><dl class="section note"><dt>Note</dt><dd><ul>
<li>An intermediate class should be used all the time (not only for primitives due to compiler restrictions), otherwise it won't be possible for compiler to find custom <code>operator</code> (unless this <code>operator</code> will be defined before <code>#include &lt;<a class="el" href="eswitch__v5_8hpp.html" title="implementation which enhance switch statement">eswitch_v5.hpp</a>&gt;</code>, only then intermediate class won't be needed).</li>
<li>Also the example below demonstrate if a certain value should be returned from custom <code>operator</code> and transferred to <code>Case</code> as <a href="#syntax">input parameter</a>, then the value should be wrapped into <code><a class="elRef" href="http://en.cppreference.com/w/cpp/utility/optional.html">std::optional</a></code>.</li>
</ul>
</dd></dl>
<b>Example:</b> <a class="el" href="md_examples.html#example-value-and-type-transferring">Value and Type transferring</a></div><div align="left"></div><h1><a class="anchor" id="autotoc_md16"></a>
Rationalities</h1>
<div align="left"> <hr  />
</div><div align="left"><ul>
<li>Using macroses for <code>Case</code> and <code>Default</code> allowed me to be as close as possible to the <span class="keywordflow"><code>switch</code></span> statement regarding syntax, otherwise there was no way to hide verbose lambda declaration.</li>
<li><b>I can use compile-time hashing in order to use string within the <span class="keywordflow"><code>switch</code></span> statement</b>. Yes you can. But there are several downsides. First of all, you need to implement it yourself since there is no standard implementation. Second of all, you need to deal with possible collisions. After all those steps you will solve just one limitation, it still won't be as powerful as the <span class="keywordflow"><code>if</code></span> statement, nor my implementation. Which is much more advance since it allows:<ul>
<li>match for any types,</li>
<li>compose complex conditions,</li>
<li>write extensions and</li>
<li><code>eswitch</code> can work at compile-time as long as the provided data known at compile-time, but there is one catch, now it is not working and the reason is that <code><a class="elRef" href="http://en.cppreference.com/w/cpp/utility/functional/reference_wrapper.html">std::reference_wrapper</a></code> isn't <span class="keyword"><code>constexpr</code></span> althought it must be since C++20. </li>
</ul>
</li>
</ul>
</div></div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="amake_tuple_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/utility/tuple/make_tuple.html">std::make_tuple</a></div><div class="ttdeci">T make_tuple(T... args)</div></div>
<div class="ttc" id="agroup__index-variables_html_ga0467e341724f219d72f18c1c0885442a"><div class="ttname"><a href="group__index-variables.html#ga0467e341724f219d72f18c1c0885442a">eswitch_v5::_1</a></div><div class="ttdeci">constexpr Index_&lt; 0 &gt; _1</div><div class="ttdef"><b>Definition:</b> <a href="eswitch__v5_8hpp_source.html#l00174">eswitch_v5.hpp:174</a></div></div>
<div class="ttc" id="afabs_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/numeric/math/fabs.html">std::fabs</a></div><div class="ttdeci">T fabs(T... args)</div></div>
<div class="ttc" id="agroup__other-variables_html_ga23e83b648756cadca9232aaf9d7d3d03"><div class="ttname"><a href="group__other-variables.html#ga23e83b648756cadca9232aaf9d7d3d03">eswitch_v5::fallthrough_</a></div><div class="ttdeci">static constexpr Fallthrough fallthrough_</div><div class="ttdoc">Indicates fall through from previous Case without testing condition of following Case.</div><div class="ttdef"><b>Definition:</b> <a href="eswitch__v5_8hpp_source.html#l01016">eswitch_v5.hpp:1016</a></div></div>
<div class="ttc" id="aregex_match_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/regex/regex_match.html">std::regex_match</a></div><div class="ttdeci">T regex_match(T... args)</div></div>
<div class="ttc" id="aany_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/utility/any.html">std::any</a></div></div>
<div class="ttc" id="agroup__main-components_html_ga11dfab51a8955d42153603db05629b59"><div class="ttname"><a href="group__main-components.html#ga11dfab51a8955d42153603db05629b59">eswitch_v5::any_from</a></div><div class="ttdeci">static constexpr auto any_from(Args &amp;&amp;... args)</div><div class="ttdoc">Helper function which allows to find if something is within the list( passed arguments ).</div><div class="ttdef"><b>Definition:</b> <a href="eswitch__v5_8hpp_source.html#l00991">eswitch_v5.hpp:991</a></div></div>
<div class="ttc" id="agroup__macroses_html_gaff2b0c246e6111e260e650b0ff4a8eb5"><div class="ttname"><a href="group__macroses.html#gaff2b0c246e6111e260e650b0ff4a8eb5">Default</a></div><div class="ttdeci">#define Default</div><div class="ttdoc">Declares body which will be executed in case of no other matches.</div><div class="ttdef"><b>Definition:</b> <a href="eswitch__v5_8hpp_source.html#l01029">eswitch_v5.hpp:1029</a></div></div>
<div class="ttc" id="agroup__macroses_html_gae733eb4e00d6306a21422f02ef7e8ca4"><div class="ttname"><a href="group__macroses.html#gae733eb4e00d6306a21422f02ef7e8ca4">Case</a></div><div class="ttdeci">#define Case(...)</div><div class="ttdoc">Accepts conditions of various forms.</div><div class="ttdef"><b>Definition:</b> <a href="eswitch__v5_8hpp_source.html#l01026">eswitch_v5.hpp:1026</a></div></div>
<div class="ttc" id="agroup__main-components_html_ga82f93fb22725d76bb016b488742331d1"><div class="ttname"><a href="group__main-components.html#ga82f93fb22725d76bb016b488742331d1">eswitch_v5::eswitch</a></div><div class="ttdeci">static constexpr auto eswitch(Ts &amp;&amp;... ts)</div><div class="ttdoc">This function is responsible for passing arguments for class eswitch_impl with overloaded operator(),...</div><div class="ttdef"><b>Definition:</b> <a href="eswitch__v5_8hpp_source.html#l00838">eswitch_v5.hpp:838</a></div></div>
<div class="ttc" id="amake_pair_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/utility/pair/make_pair.html">std::make_pair</a></div><div class="ttdeci">T make_pair(T... args)</div></div>
<div class="ttc" id="agroup__other-variables_html_ga4330972eb8a11e6d7848c7bae4582e69"><div class="ttname"><a href="group__other-variables.html#ga4330972eb8a11e6d7848c7bae4582e69">eswitch_v5::_</a></div><div class="ttdeci">static constexpr extension::any _</div><div class="ttdoc">Used in Case to match for any input.</div><div class="ttdef"><b>Definition:</b> <a href="eswitch__v5_8hpp_source.html#l01019">eswitch_v5.hpp:1019</a></div></div>
<div class="ttc" id="agroup__underlying-details_html_ga7a5215c0c1466c28d549a94cddab1b7a"><div class="ttname"><a href="group__underlying-details.html#ga7a5215c0c1466c28d549a94cddab1b7a">eswitch_v5::extension::range</a></div><div class="ttdeci">range</div><div class="ttdef"><b>Definition:</b> <a href="eswitch__v5_8hpp_source.html#l00067">eswitch_v5.hpp:67</a></div></div>
<div class="ttc" id="agroup__modules_html_ga620be0eec7b29eb300458a049bde6abe"><div class="ttname"><a href="group__modules.html#ga620be0eec7b29eb300458a049bde6abe">eswitch_v5::operator==</a></div><div class="ttdeci">static auto operator==(const std::string &amp;tuple_entry, const regexter &amp;value)</div><div class="ttdoc">CaseModule to support for matching and withdrawing of values for and from regular expression.</div><div class="ttdef"><b>Definition:</b> <a href="eswitch__v5_8hpp_source.html#l00413">eswitch_v5.hpp:413</a></div></div>
<div class="ttc" id="agroup__index-variables_html_gacc83659898439dd14b78fc60be68ce28"><div class="ttname"><a href="group__index-variables.html#gacc83659898439dd14b78fc60be68ce28">eswitch_v5::_2</a></div><div class="ttdeci">constexpr Index_&lt; 1 &gt; _2</div><div class="ttdef"><b>Definition:</b> <a href="eswitch__v5_8hpp_source.html#l00175">eswitch_v5.hpp:175</a></div></div>
<div class="ttc" id="avariant_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/utility/variant.html">std::variant</a></div></div>
<!-- HTML footer for doxygen 1.8.17-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
</div>
</body>
</html>
